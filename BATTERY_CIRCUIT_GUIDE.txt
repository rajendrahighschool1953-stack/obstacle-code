â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            BATTERY MONITORING CIRCUIT - SETUP GUIDE                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”‹ VOLTAGE DIVIDER FOR BATTERY MONITORING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SIMPLEST METHOD (No external components):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Battery +
    |
    +----> USB Power  â†’  Arduino 5V Regulator
    
  Arduino reads internal 5V reference
  âœ“ Works but less accurate
  âœ“ No additional components needed
  âœ— Cannot detect battery voltage dips below 5V

Formula: ADC_Value = (Voltage / 5V) Ã— 1024


RECOMMENDED METHOD (Voltage Divider):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

For 6-9V batteries with equal resistor divider:

                 +Battery (6-9V)
                    |
                    | (RED WIRE)
                    |
                  â”Œâ”€â”´â”€â”
                  â”‚   â”‚
                  â”‚10kÎ©â”‚  â† R1 (High impedance)
                  â”‚   â”‚
                  â””â”€â”¬â”€â”˜
                    â”‚
                    â”œâ”€â”€â”€â”€â†’ A5 (Analog Pin 5)  â† TO ARDUINO
                    â”‚
                  â”Œâ”€â”´â”€â”
                  â”‚   â”‚
                  â”‚10kÎ©â”‚  â† R2 (Ground path)
                  â”‚   â”‚
                  â””â”€â”¬â”€â”˜
                    |
                    | (BLACK WIRE)
                    |
                  GND (Battery-)


EQUIVALENT SCHEMATIC:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

        +Vbat
          |
          R1
          |
     +----+----+  â†’ ADC_Pin (A5)
     |         |
     R2       100nF (Optional filter cap)
     |         |
     +----+----+
          |
          GND


DETAILED WIRING:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. POWER CONNECTIONS:
   Battery Red   â†’ R1 (first resistor)
   Battery Black â†’ GND (Arduino ground)

2. RESISTOR CONNECTIONS:
   R1 â†’ R2 (middle connection goes to A5)
   Both resistors should be 10kÎ© (same value!)

3. A5 PIN CONNECTION:
   Middle junction (R1-R2) â†’ Arduino A5

4. OPTIONAL: ADD FILTER CAPACITOR
   Capacitor (100nF) from A5 to GND
   Smooths reading noise


VOLTAGE CALCULATIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

For 7.4V LiPo Battery (2S):

Divider Formula: V_out = V_in Ã— (R2 / (R1 + R2))

With equal 10kÎ© resistors:
V_out = 7.4V Ã— (10k / 20k) = 3.7V â† Measured at A5

ADC Reading: (3.7V / 5V) Ã— 1024 = 755 (full charge)


CHARGING CURVE (7.4V LiPo):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Voltage (V)    ADC Value    Battery Status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7.4V           755          Fully Charged âœ“
7.2V           737          Very Good
7.0V           717          Good
6.8V           696          Moderate
6.6V           675          Low âš ï¸
6.4V           655          Very Low âš ï¸
6.2V           635          Critical âš ï¸âš ï¸
6.0V           614          STOP! â›”

Current Setting: Threshold = 350 ADC
This protects battery from dangerous discharge


DIFFERENT BATTERY COMBINATIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

6V Battery (4xAA):
V_out = 6V Ã— 0.5 = 3V (full)
ADC_full = 614
Threshold should be ~200 (for 3.6V safety)

9V Battery:
V_out = 9V Ã— 0.5 = 4.5V (full)
ADC_full = 921
Threshold should be ~450 (for 3.3V safety)

11.1V LiPo (3S):
V_out = 11.1V Ã— 0.5 = 5.55V (exceeds Arduino 5V!)
â›” USE DIFFERENT RESISTOR RATIO:
  - Use 22kÎ© for R1 and 10kÎ© for R2
  - V_out = 11.1V Ã— (10k / 32k) = 3.47V âœ“


TESTING YOUR SETUP:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. BUILD THE CIRCUIT:
   âœ“ Connect R1 to battery positive
   âœ“ Connect R2 to ground
   âœ“ Connect middle point to A5
   âœ“ Add capacitor (optional)

2. VERIFY CONNECTIONS:
   âœ“ Check no shorts
   âœ“ Verify resistor values (with multimeter)
   âœ“ Test continuity from battery to Arduino

3. UPLOAD CODE:
   âœ“ Set DEBUG_MODE = true
   âœ“ Upload code to Arduino

4. CHECK SERIAL OUTPUT:
   Battery ADC: XXX | Estimated: YY%
   
   Expected range: 600-1024 (full battery)
   Below 350 = Low battery warning

5. ADJUST THRESHOLD IF NEEDED:
   Line 35: const int LOW_BATTERY_THRESHOLD = 350;
   
   Modify based on your battery chemistry


COMPONENT SHOPPING LIST:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Item              Value    Quantity    Purpose
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Resistor          10kÎ©     2          Voltage divider
Capacitor         100nF    1          Optional filter
Jumper wires       -        4          Connections
Solderable proto   -        1          Build circuit


COMMON ISSUES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Issue: Battery reading always shows same value
â†’ Check resistor values are correct (10kÎ© each)
â†’ Verify A5 connection is secure
â†’ Test with multimeter at middle junction

Issue: Reading fluctuates wildly
â†’ Add 100nF capacitor from A5 to GND
â†’ Check for loose connections
â†’ Keep battery wire away from motor wires

Issue: No battery warning even when battery low
â†’ Adjust LOW_BATTERY_THRESHOLD higher
â†’ Verify voltage divider math for your battery
â†’ Check A5 pin is reading (debug serial output)

Issue: Arduino won't upload after adding battery circuit
â†’ Make sure A5 doesn't exceed 5V
â†’ Check GND connection is secure
â†’ Remove battery, try again


SAFETY NOTES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸  IMPORTANT:
  â€¢ Never exceed 5V on Arduino analog pins!
  â€¢ Use proper resistor values for your battery
  â€¢ Keep battery wires away from motor wires
  â€¢ Always test with multimeter before connecting
  â€¢ Use fused battery holder for protection
  â€¢ Never discharge LiPo below 3.0V per cell


OPTIONAL: DIFFERENT THRESHOLD FOR DIFFERENT BATTERIES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

For 6V (4xAA):
  const int LOW_BATTERY_THRESHOLD = 200;  // ~3.6V

For 7.4V LiPo:
  const int LOW_BATTERY_THRESHOLD = 350;  // ~3.4V

For 9V:
  const int LOW_BATTERY_THRESHOLD = 450;  // ~3.3V

For 11.1V LiPo (with 22k/10k divider):
  const int LOW_BATTERY_THRESHOLD = 350;  // ~3.2V


VERIFICATION CHECKLIST:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â–¡ Resistors soldered correctly (10kÎ© values verified)
â–¡ Middle junction goes to A5
â–¡ Battery positive â†’ R1
â–¡ Battery negative â†’ GND (Arduino ground)
â–¡ No shorts between components
â–¡ Optional capacitor in place
â–¡ Multimeter confirms middle voltage at ~half battery
â–¡ Arduino uploads successfully
â–¡ Serial monitor shows battery readings
â–¡ Low battery alert works as expected
â–¡ LED turns on/off with battery status


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Your robot now has smart battery monitoring! ğŸ”‹

Happy robotics! ğŸ¤–

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
